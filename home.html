<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <!--Bootstrap-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--custom styles-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/header.css">
    <link rel="stylesheet" type="text/css" href="css/footer.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/collection.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="js/host.js"></script>
    <script src="./tata-master/dist/tata.js"></script>

</head>

<body>
    <!-- HEADER TOP -->
    <div class="header-top">
        <div class="container2">
            <div class="row">
                <div class="col-md-4">
                    <ul class="right">
                        <li class="menu-item-border"><a class="item" href="#"><img src="images/flagen.webp"> English</a>
                        </li>
                        <li class="menu-item"><a class="item" href="#">$ USD</a></li>
                    </ul>
                </div>
                <div class="col-md-8 ">
                    <ul class="left" id="accountLogin">

                    </ul>
                    <script>
                        var token = localStorage.getItem('token');
                        var userInfo = JSON.parse(localStorage.getItem('userInfo'));
                        if (token) {
                            document.getElementById('accountLogin').innerHTML = `
                            <li class="menu-item-border">
                                <a class="item" href="cart.html"><i class="fas fa-list-alt"></i>Track your order</a>
                            </li>
                            <li class="menu-item-border">
                                <a class="item" href="profile.html#profile"><i class="fas fa-user"></i>${userInfo.userName.slice(0, 8)}</a>
                            </li>
                            <li class="menu-item" >
                                <a class="item" onclick="logout()"><i class="fas fa-sign-in-alt" ></i></i>Log out</a>
                            </li>`
                        }
                        else {
                            document.getElementById('accountLogin').innerHTML = `
                            <li class="menu-item-border">
                                <a class="item" href="cart.html"><i class="fas fa-list-alt"></i>Track your order</a>
                            </li>
                            <li class="menu-item-border">
                                <a class="item" href="register.html#register"><i class="fas fa-user"></i>Create Account</a>
                            </li>
                            <li class="menu-item">
                                <a class="item" href="login.html#login"><i class="fas fa-sign-in-alt"></i></i>Login</a>
                            </li>`
                        }
                    </script>
                    <script>
                        function logout() {
                            localStorage.removeItem('token');
                            localStorage.removeItem('userInfo');
                            document.getElementById('accountLogin').innerHTML = `
                            <li class="menu-item-border">
                                <a class="item" href="cart.html"><i class="fas fa-list-alt"></i>Track your order</a>
                            </li>
                            <li class="menu-item-border">
                                <a class="item" href="register.html#register"><i class="fas fa-user"></i>Create Account</a>
                            </li>
                            <li class="menu-item">
                                <a class="item" href="login.html#login"><i class="fas fa-sign-in-alt"></i></i>Login</a>
                            </li>`
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>
    <!-- HEADER MIDDLE -->
    <div id="header-middle">

    </div>
    <script src="js/header_middle.js"></script>
    <!-- HEADER NAV -->
    <div id="header-nav">
        
    </div>
    <script src="js/header_nav.js"></script>
    <!-- PICTURE SALE -->
    <div id="slide" class="carousel slide" data-ride="carousel">

        <!-- Indicators -->
        <ul class="carousel-indicators">
            <li data-target="#slide" data-slide-to="0" class="active"></li>
            <li data-target="#slide" data-slide-to="1"></li>
            <li data-target="#slide" data-slide-to="2"></li>
        </ul>


        <!-- The slideshow -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="pic-slide" src="images/section-slideshow-v2-img2.webp" alt="Los Angeles" width="1100"
                    height="500">
                <div class="box-content">
                    <div class="box-info">
                        <div class="box-title">
                            <h3 class="titlebig" style="color:#fff;">Watch Collection</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img class="pic-slide" src="images/section-slideshow-v2-img3.webp" alt="Chicago" width="1100"
                    height="500">
                <div class="box-content2">
                    <div class="box-info">
                        <div class="box-title">
                            <h3 class="titlebig" style="color:#000;">Phone Collection</h3>
                        </div>
                        <div class="box-title2">
                            <h3 class="title-small" style="color:#000;">Discount <strong>-30% Off</strong> this week
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img class="pic-slide" src="images/section-slideshow-v2.webp" alt="New York" width="1100" height="500">
                <div class="box-content3">
                    <div class="box-info">
                        <div class="box-title">
                            <h3 class="titlebig" style="color:#fff;">Headphone Collection</h3>
                        </div>
                        <div class="box-title2">
                            <h3 class="title-small" style="color:#e5e5e5;">Discount <strong>-30% Off</strong> this week
                            </h3>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <!-- Left and right controls -->
        <a class="prev-slide" href="#slide" data-slide="prev">
            <i class="fa fa-arrow-left"></i>
        </a>
        <a class="next-slide" href="#slide" data-slide="next">
            <i class="fa fa-arrow-right"></i>
        </a>
    </div>
    <!-- SHOPIFY-SECTION 1 -->
    <div class="shopify-section1" style="background-color: #e5e3e3;">
        <div class="container-fluid container-f-50">
            <div class="row">
                <div class="col-sm-6">
                    <div class="parent">
                        <div class="child" style="
                            height: 400px;">
                            <img src="images/banner-11.png" class="img-responsive" alt="banner">
                        </div>
                        <div class="banner-info">
                            <div class="banner-content">
                                <h3 class="title">Samsung</h3>
                                <h4 class="title-hightlight">Galaxy A71</h4>
                                <a class="shopnow" href="collection.html">SHOP NOW</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="parent">
                        <div class="child" style="
                            height: 400px;">
                            <img src="images/banner-12.png" class="img-responsive" alt="banner">
                        </div>
                        <div class="banner-info">
                            <div class="banner-content">
                                <h3 class="title">Apple</h3>
                                <h4 class="title-hightlight">iphone 11</h4>
                                <a class="shopnow" href="collection.html">SHOP NOW</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- BEST SELLER -->
    <div class="contain-best-seller">
        <div class="container2">
            <div id="bestseller" class="carousel slide" data-ride="carousel" data-interval="false">
                <!-- tab head -->
                <div class="tab-head">
                    <h2 class="title2">
                        <span class="text">Products</span>
                        <i class="fas fa-caret-up"></i>
                    </h2>
                    <!-- Indicators -->




                </div>

                <!-- The slideshow -->
                <div class="carousel-inner">
                    <!-- LIST 1 -->
                    <div class="carousel-item active">
                        <div class="row" id="newProduct1">

                        </div>
                    </div>
                    <div class="carousel-item ">
                        <div class="row" id="newProduct2">

                        </div>
                    </div>
                    <div class="carousel-item ">
                        <div class="row" id="newProduct3">

                        </div>
                    </div>
                    <script>
                        var list;
                        getNewProduct(0, 8, 'newProduct1')
                        getNewProduct(9, 17, 'newProduct2')
                        getNewProduct(18, 26, 'newProduct3')
                        function getNewProduct(start, end, idRow) {
                            axios.get(`${host}/list_product`).then((result) => {
                                let list_product = result.data.data
                                console.log(list_product[0].create_date);
                                list = list_product;
                                list_product.map((item, index) => {
                                    if (index >= start && index < end) {
                                        if (item.amount > 0 && item.status[0] === 'available') {
                                            document.getElementById(idRow).innerHTML += `
                                            <div class="col-sm-3 pd-30">
                                                <div class="product-inner">
                                                    <div class="parent2">
                                                        <a href="#">
                                                            <img class="img-responsive" src="${item.image_name}">
                                                        </a>
                                                    </div>
                                                    <div class="product-info">
                                                        <div class="product-name">
                                                            <a href="#" tabindex="0">
                                                                ${item.name}
                                                            </a>
                                                        </div>
                                                        <span class="price">
                                                            ${item.price}$
                                                        </span>
                                                    </div>
                                                    <!-- group button -->
                                                    <div class="group-button">
                                                        <div class="add-to-wishlist tooltip-1">
                                                            <span class="tooltiptext">Login to use Wishlist</span>
                                                            <a href="/account/login">
                                                                <i class="far fa-heart"></i>
                                                            </a>
                                                        </div>
                                                        <div class="view-details tooltip-1">
                                                            <span class="tooltiptext">View details</span>
                                                            <a href="./detail.html" onclick="getIDtoDetail('${item._id}')">
                                                                <i class="fas fa-search"></i>
                                                            </a>
                                                        </div>
                                                        <div class="add-to-cart tooltip-1" >
                                                            <span class="tooltiptext">Add to Cart</span>
                                                                <button name="add" class="add-to-cart-btn" onclick="addtocart('${item._id}')">
                                                                    <i class="fas fa-shopping-bag"></i>
                                                                </button>
                                                        </div>
                                                    </div>
                                                    <!-- group button -->
                                                </div>
                                            </div>
                                            `

                                        } else {
                                            console.log("Hết sản phẩm trong kho hoặc sản phẩm không sẳn sàng");
                                            end++
                                        }
                                    }

                                })
                            })
                        }
                        function addtocart(id) {
                            tata.success('Successfully', 'Add to cart', {
                                position: 'tr',
                                closeBtn: true,
                                duration: 1000,
                                progress: true

                            });
                            var productbyid = list.find(item => {
                                return item._id === id;
                            });
                            productbyid.count = 1;
                            var lcStr = JSON.parse(localStorage.getItem('productCart'));
                            if (lcStr) {
                                productArr = lcStr;
                            }
                            if (lcStr !== null) {
                                var flag = -1;
                                for (let i = 0; i < lcStr.length; i++) {
                                    if (productbyid._id === lcStr[i]._id) {
                                        productbyid.count = lcStr[i].count;
                                        flag = i;
                                    }
                                }
                                if (flag == -1) {
                                    productbyid.count = 1;
                                }
                            }
                            if (productArr.length === 0) {
                                productArr.push(productbyid);
                            }
                            else {
                                var a = -1;
                                for (let i = 0; i < productArr.length; i++) {
                                    if (productArr[i]._id === productbyid._id) {
                                        productArr[i].count++;
                                        a = i;
                                        break;
                                    }
                                }
                                if (a == -1) {
                                    productArr.push(productbyid);
                                }
                                else {
                                    a = -1;
                                }
                            }
                            document.getElementById('countproduct').innerHTML = productArr.length;
                            localStorage.setItem('productCart', JSON.stringify(productArr));
                        }
                        function getIDtoDetail(id) {
                            var idDetail = list.find(item => {
                                return item._id === id;
                            });
                            localStorage.setItem('productDetail', JSON.stringify(idDetail));
                        }
                    </script>
                    <!-- END LIST 1 -->
                </div>
                <div id="control-head" style="display: flex;
                justify-content: center;">
                    <ul class="tab-link">
                        <li data-target="#bestseller" data-slide-to="0" class="">
                            <a data-toggle="tab" href="#" class="non-active active"><span><i
                                        class="fas fa-circle"></i></span></a>
                        </li>

                        <li data-target="#bestseller" data-slide-to="1">
                            <a data-toggle="tab" href="#" class="non-active "><span><i class="fas fa-circle"></i>
                                </span></a>
                        </li>
                        <li data-target="#bestseller" data-slide-to="2">
                            <a data-toggle="tab" href="#" class="non-active "><span><i class="fas fa-circle"></i>
                                </span></a>
                        </li>

                    </ul>
                </div>
                <script>
                    var header = document.getElementById("control-head");
                    var btns = header.getElementsByClassName("non-active");
                    for (var i = 0; i < btns.length; i++) {
                        btns[i].addEventListener("click", function () {
                            var current = header.getElementsByClassName("active");
                            current[0].className = current[0].className.replace(" active", "");
                            this.className += " active";
                        });
                    }
                </script>
            </div>
        </div>
    </div>
    <!-- END BESTSELLER -->
    <!-- CODE DELETE -->
    <!-- FREE SHIP -->
    <div id="freeship">
        <div class="section-banner-v3">
            <div class="banner-box">
                <div class="banner-img">
                    <a href="#">

                        <img src="images/freeship-banner.webp" class="img-fluid">

                    </a>
                </div>

                <div class="banner-title">

                    <h3 class="title-4">Free shipping worldwide on all<br>baskets over $200.</h3>


                    <a href="#" class="button-shop text-center">Shipping &amp; Returns</a>

                </div>
            </div>
        </div>
    </div>
    <!-- INSTAGRAM -->
    <div class="ins" id="instagram">
        <div class="box-instagram">
            <h3 class="title_heading" style="color : #59b210">instagram.shop</h3>
            <p class="des_insta ">Follow us on Instagram</p>
        </div>
        <div class="picture-ins">
            <div class="box-img w-40">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram1.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i>
                    </a>
                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>



            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram2.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>



            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram3.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>



            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram4.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>
            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram5.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>



            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram6.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>



            <div class="box-img">
                <div class="picture text-center">
                    <a href="https://www.instagram.com/">
                        <img class="w-100" src="images/instagram7.webp" alt="instagram">
                    </a>
                </div>
                <div class="content-intagram text-center">
                    <a href="https://www.instagram.com/" class="icon-intargram"><i class="fab fa-instagram"></i></a>

                    <h4 class="mb-0">Shop it</h4>

                </div>
            </div>
        </div>
    </div>
    <!-- FOOTER -->
    <div id="footer">
            
    </div>
    <script src="js/footer.js"></script>
    <script>
        function search(e) {
            if (e.keyCode == 13) {
                let text = e.target.value;
                console.log(text);
                if (!text)
                    return;
                text = text.trim();
                var keyword = {
                    name: text
                }
                localStorage.setItem('searchKey', text);
                e.target.value = '';
                location.assign('search.html');
            }
        }
    </script>
</body>

</html>